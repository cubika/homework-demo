KISSY.add("components/slide_k",function(e,a,t){function i(i,n){this.defaults={autoplay:!0,control:!1,duration:500,interval:2e3,hoverOnPause:!0,orientation:0};var r=e.merge(this.defaults,n),l=[],d=0,s=0,o=null,c=this;a.hasClass(i,"slider")||a.addClass(i,"slider");var h;a.parent(a.get("img"),"a")?(h=e.all('<div class="background"></div>'),a.wrapAll("a",a.create('<div class="background" />'))):(background=e.all("ul",i),a.addClass(background,"background"));var p=a.children(background);e.each(p,function(t){a.addClass(t,"slide");var i=e.all("img",t);a.width(i,a.width(i)),l.push({width:i.width(),height:i.height()}),s+=i.width()}),a.css(i,{width:l[d].width,height:l[d].height}),a.css(background,{width:s}),a.wrap(background,a.create('<div class="window"></div>'));for(var u=e.all("<ul class='nav'></ul>"),v=0;v<l.length;v++)a.append(e.all('<li><a href="">'+(v+1)+"</a></li>"),u);if(a.addClass(e.all("li",u).item(d),"selected"),t.delegate(u,"click","li",function(t){var i="li"==t.target.tagName.toLowerCase()?t.target:a.parent(t.target,"li");d=e.indexOf(i,a.children(a.parent(i))),c.slideOnce(),t.halt()}),a.append(u,i),this.moveRight=function(){d=(d+1)%l.length},this.moveLeft=function(){d=(l.length+d-1)%l.length},this.slideOnce=function(){for(var t=0,n=0;d>n;n++)t+=l[n].width;background.animate({left:-t+"px"},{duration:r.duration/1e3},"easeIn"),a.css(i,{width:l[d].width,height:l[d].height});var s=e.all("li",u);a.removeClass(s,"selected"),a.addClass(s.item(d),"selected")},this.prevHandler=function(){clearInterval(o),o=null,c.moveLeft(),c.slideOnce()},this.nextHandler=function(){clearInterval(o),o=null,c.moveRight(),c.slideOnce()},r.autoplay){if(o=setInterval(function(){c.moveRight(),c.slideOnce()},r.interval),r.hoverOnPause&&(t.on(i,"mouseover",function(){clearInterval(o),o=null}),t.on(i,"mouseleave",function(){null==o&&(o=setInterval(function(){c.moveRight(),c.slideOnce()},r.interval))})),r.control){var g=e.all('<span class="arrow prev"></span><span class="arrow next"></span>');a.append(g,i);var w=e.all(".prev",a.parent(g)),f=e.all(".next",a.parent(g));t.on(w,"click",this.prevHandler),t.on(f,"click",this.nextHandler)}t.on(i,"swipe",function(e){"right"==e.direction?c.prevHandler():"left"==e.direction&&c.nextHandler()})}}return i},{requires:["dom","event"]}),KISSY.add("components/data",function(e,a,t){for(var i={"price|100-500":128,"shop|1":["特步","安踏","匹克","鸿星尔克","乔丹"],"deals|100-9000":200,assess:function(){return a.Random.integer(100,this.deals)}},n='<div class="product">			<div class="product-wrap">				<div class="productImg-wrap">					<a href="" class="productImg">						<img src="img/{{shop}}.jpg">					</a>				</div>				<div class="productPrice">					<em><b>¥</b>{{price}}.00</em>				</div>				<div class="productTitle">					<a href="">{{shop}}男鞋正品秋冬新款潮流休闲运动鞋男防滑加绒保暖棉鞋雪地鞋</a>				</div>				<div class="productShop">					<a href="">						{{shop}}官方旗舰店					</a>				</div>				<div class="productStatus">					<span>月成交 <em>{{deals}}笔</em></span>					<span>评价 <a href="">{{assess}}</a></span>				</div>			</div>		</div>',r="",l=a.Random.integer(3,10),d=0;l>d;d++)r+=new t(n).render(a.mock(i));return r},{requires:["mock","xtemplate"]}),KISSY.add("components/overlay",function(e,a,t){function i(e,a){var t,i,n=a.width,r=a.height,l=n/r;if(wrapperW=e.width,wrapperH=e.height,n>r){t=wrapperW;var l=n/wrapperW;i=r/l,i>wrapperH&&(l=i/wrapperH,t/=l,i=wrapperH)}else{i=wrapperH;var l=r/wrapperH;t=n/l,t>wrapperW&&(l=t/wrapperW,t=wrapperW,i/=l)}return{width:t,height:i,left:e.width/2-t/2,top:e.height/2-i/2}}function n(t,n){var r=i({width:e.all(window).width()-n.horizontal,height:e.all(window).height()-n.vertical},{width:t.width(),height:t.height()});a.css(t,{width:r.width,height:r.height,left:r.left+n.horizontal/2,top:r.top+n.vertical/2})}var r={vertical:140,horizontal:220},l='<div class="overlay">			<img src="" alt="">			<div class="description">				<h3 class="title"></h3>			</div>		</div>';return function(i){var d=e.all(l);a.append(d,document.body);var s=e.all("img",d),o=e.all(".title",d);t.on(i,"click",function(t){d.fadeIn(.3);var i=e.all(t.target);a.attr(s,"src",a.attr(i,"src")),a.text(o,a.text(e.all(".productTitle",a.parent(i,".product")))),n(s,r)}),t.on(d,"click",function(){"none"!=a.css(d,"display")&&d.fadeOut(.3)}),t.on(window,"resize",function(){n(s,r)})}},{requires:["dom","event","node"]}),KISSY.add("components/main",function(e,a,t,i,n){e.ready(function(){new a(e.all(".slider"),{autoplay:!0})}),e.all("#part2").append(t),i.on("a","click",function(e){e.preventDefault()}),n(e.all("img","#part2"))},{requires:["./slide_k","./data","event","./overlay","node"]});